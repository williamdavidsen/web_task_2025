@{
    ViewData["Title"] = "Home";
}

<div class="container py-5">
    @if (!User.Identity?.IsAuthenticated ?? true)
    {
        <div class="text-center py-5">
            <h1 class="mb-3">Welcome to Homecare</h1>
            <p class="text-muted mb-4">Please sign in to access your dashboard.</p>
            <a class="btn btn-primary btn-lg" asp-area="Identity" asp-page="/Account/Login">
                Login
            </a>
        </div>
    }
    else
    {
        <div class="row g-4">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-body d-flex align-items-center justify-content-between">
                        <div>
                            <h2 class="h4 mb-1">Hi, @User.Identity!.Name</h2>
                            <div class="text-muted">You are signed in.</div>
                        </div>
                        <a class="btn btn-primary" asp-controller="Home" asp-action="AfterLogin">
                            Go to my dashboard
                        </a>
                    </div>
                </div>
            </div>

            @* Client quick actions *@
            @if (User.IsInRole("Client"))
            {
                <div class="col-md-6">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title">Client</h5>
                            <p class="text-muted">Create and manage your appointments.</p>
                            <div class="d-flex gap-2">
                                <a class="btn btn-outline-primary" asp-controller="Client" asp-action="Dashboard">
                                    Open Dashboard
                                </a>
                                <a class="btn btn-outline-secondary" asp-controller="Client" asp-action="Create">
                                    New Appointment
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }

            @* Personnel quick actions *@
            @if (User.IsInRole("Personnel"))
            {
                <div class="col-md-6">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title">Personnel</h5>
                            <p class="text-muted">Review visits and edit working days.</p>
                            <div class="d-flex gap-2">
                                <a class="btn btn-outline-primary" asp-controller="Personnel" asp-action="Dashboard">
                                    Open Dashboard
                                </a>
                                <a class="btn btn-outline-secondary" asp-controller="Personnel" asp-action="CreateDay">
                                    Edit Working Days
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }

            @* Admin quick actions *@
            @if (User.IsInRole("Admin"))
            {
                <div class="col-12">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title">Admin</h5>
                            <p class="text-muted">Full overview of appointments and slots.</p>
                            <div class="d-flex flex-wrap gap-2">
                                <a class="btn btn-outline-primary" asp-controller="Admin" asp-action="Dashboard">
                                    Admin Dashboard
                                </a>
                                <a class="btn btn-outline-secondary" asp-controller="Appointment" asp-action="Table">
                                    Appointments (All)
                                </a>
                                <a class="btn btn-outline-secondary" asp-controller="AvailableSlot" asp-action="Table">
                                    Slots (All)
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>



@section Scripts {
    <script>
        // Carousel speed
        const hc = document.getElementById('homeCarousel');
        if (hc) new bootstrap.Carousel(hc, { interval: 5000, pause: 'hover', wrap: true });
    </script>
}